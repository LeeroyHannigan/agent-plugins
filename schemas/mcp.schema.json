{
  "$id": "https://awslabs.github.io/agent-plugins/schemas/mcp.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Schema for .mcp.json MCP server definitions",
  "properties": {
    "mcpServers": {
      "additionalProperties": {
        "allOf": [
          {
            "if": {
              "properties": {
                "type": {
                  "const": "stdio"
                }
              },
              "required": [
                "type"
              ]
            },
            "then": {
              "required": [
                "command"
              ]
            }
          },
          {
            "if": {
              "properties": {
                "type": {
                  "const": "http"
                }
              },
              "required": [
                "type"
              ]
            },
            "then": {
              "required": [
                "url"
              ]
            }
          }
        ],
        "properties": {
          "args": {
            "description": "Command arguments (stdio type)",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "command": {
            "description": "Command to execute (stdio type)",
            "type": "string"
          },
          "disabled": {
            "default": false,
            "type": "boolean"
          },
          "env": {
            "additionalProperties": {
              "type": "string"
            },
            "description": "Environment variables",
            "type": "object"
          },
          "timeout": {
            "description": "Timeout in milliseconds",
            "minimum": 1000,
            "type": "integer"
          },
          "type": {
            "default": "stdio",
            "enum": [
              "stdio",
              "http"
            ],
            "type": "string"
          },
          "url": {
            "description": "HTTP endpoint (http type)",
            "type": "string"
          }
        },
        "type": "object"
      },
      "type": "object"
    }
  },
  "required": [
    "mcpServers"
  ],
  "title": "MCP Configuration",
  "type": "object"
}
